<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

  <mapper namespace="doself.admin.member.mapper.MemberMapper">
    	
  		<!-- 특정회원 조회 -->
  		<!-- <select id="getMemberInfoById" parameterType="String" resultMap="memberResultMap">
  		SELECT 
				mbr_id,
				mbr_pw,
				mbr_name, 
				mbr_grd,
				SUBSTRING_INDEX(mbr_grd, 'mbr_grd_',-1) AS mbr_grd_num,
				mbr_addr,
				mbr_daddr, 
				mbr_zip, 
				mbr_telno,
				mbr_email,
				mbr_reg_date
		FROM members
		WHERE
			mbr_id = #{memberId};
  		</select> -->
  		
  		<resultMap type="Member" id="memberResultMap">
  			<id column="" property="" />
  			<result column="mbr_id" property="mbrId" />
  			<result column="mbr_pw" property="mbrPw" />
  			<result column="mbr_name" property="mbrName" />
  			<result column="mg_code" property="mgCode" />
  			<result column="mbr_email" property="mbrEmail" />
  			<result column="mbr_birth_date" property="mbrBirthDate" />
  			<result column="mbr_phone_num" property="mbrPhoneNum" />
  			<result column="mbr_gender" property="mbrGender" />
  			<result column="ac_num" property="acNum" />
  			<result column="opening_ticket_count" property="openingTicketCount" />
  			<result column="participation_ticket_count" property="participationTicketCount" />
  			<result column="mbr_point" property="mbrPoint" />

	  		<!-- 연령대 카테고리 관계 -->
	  		<association property="ageInfo" javaType="Age">
	  			<id 	column="ac_num" property="acNum" />
	  			<result column="ac_name" property="acName" />
	  		</association>
  		</resultMap>
  		
  		
  		<!-- 회원목록 조회 -->
		<select id="getMemberList" resultMap="memberResultMap">
			/* 회원목록 조회 */
			SELECT 
				m.mbr_id,
				m.mbr_pw,
				m.mbr_name, 
				m.mg_code,
				m.mbr_email,
				m.mbr_birth_date, 
				m.mbr_phone_num, 
				m.mbr_gender,
				ac.ac_name,
				m.opening_ticket_count,
				m.participation_ticket_count,
				m.mbr_point			
			FROM member m INNER JOIN age_category ac
				USING(ac_num)
			ORDER BY
				m.mbr_id
		</select>

  </mapper>