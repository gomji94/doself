<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{user/layout/default}">
<head>
	<link th:href="@{/assets/css/ticket/itemlist.css}" rel="stylesheet" type="text/css" />
</head>		
			
	<th:block layout:fragment="content-body">
        <!-- 왼쪽 사이드바 -->
        <div class="sidebar">
            <ul>
                <li>
                    <a th:href="@{/ticket/itemlist}" class="menu-item">
                        <i class="fa-solid fa-ticket"></i>
                        <div>티켓 결제</div>
                    </a>
                </li>
                <li>
                    <a th:href="@{/ticket/purchaselist}" class="menu-item">
                        <i class="fa-regular fa-rectangle-list"></i>
                        <div>티켓 상세내역 조회</div>
                    </a>
                </li>
            </ul>
        </div>
    
    <main class="main-container">
         <!-- 제목 섹션 -->
         <div class="main-container-title">
            <div id="main-container-title__eng">Payment</div>
            <div id="main-container-title__kor">티켓 결제</div>
        </div>
        <!-- 메인 콘텐츠 -->
        <div class="content-section" id="ticketContainer">
            <!-- 티켓 선택 섹션 -->
          <th:block th:if="${ticketList !=null}">
            <div class="ticket-options" id="ticket-options">
                <div class="ticketBox" th:each="l:${ticketList}" id="ticketBox" >
                    <input type="radio" name="check" class="ticketCheck" value="${l.ticketCategory}" id="ticketchk" >
                   	<div class="ticketInfo" >
                        <div class="ticketName" th:text="${l.ticketCategory}" > </div>
                        <div class="ticketDesc" th:text="${l.ticketExplanation}"></div>
                        <div class="ticketprice" th:text="${#numbers.formatInteger(l.ticketPrice,3,'COMMA')+'원'}"></div>
                   	</div>
                </div>
            </div>
          </th:block>

            <!-- 결제 내역 섹션 -->
            <div id="payment-result">
                <div class="payment-summary">
                    <h2>결제 내역</h2>
                    <div class="payment-info">
                        <span>티켓 종류:</span> 
                        <span></span>
                    </div>
                    <div class="payment-info">
                        <span>가격:</span> 
                        <span></span>
                    </div>
                    <div class="payment-info">
                        <span>부가세:</span>
                        <span></span> 
                    </div>
                    <hr>
                    <div class="total payment-info"><span>합계:</span></div>
                </div>

                <!-- 결제 버튼 -->
                <div class="button-container">
                    <button class="pay-button"><a href="#">결제하기</a></button>
                </div>
            </div>
        </div>
        <!-- 결제규정내역-->
        <div class = "regulation-box">
            <ul>
                <li>
                    구매하신 티켓은 7일 이후 환불이 불가하며, 구매 후 변경이 불가능합니다.
                </li>
                <li>
                    챌린지티켓으로 생성한 모임은 최소 인원이 모이지 않을 경우 자동 취소됩니다.
                </li>
                <li>
                    참여 중도 포기 시, 티켓 재사용이 불가합니다.
                </li>
                <li>
                    문의 사항이 있으시면 고객센터 (doself88@gmail.com) 으로 연락주세요.
                </li>
            </ul>
        </div>
    </main>
	
	</th:block> 

	<!--/* 사용자 추가 js file */-->
    <th:block layout:fragment="customJsResource"></th:block>
    
    <!--/* 사용자 추가 js script */-->
    <th:block layout:fragment="customJs">
    <script th:src="@{/assets/js/layout.js}">
     
	    document.querySelectorAll('.ticketBox').forEach(function(box) {
	        box.addEventListener('click', function() {
	            const radio = box.querySelector('input[type="radio"]');
	            if (radio) {
	                radio.click();
	            }
	        });
	    });
     

/*     	function updatePaymentResult(selectRadio){
    		const ticketCategory = selectedRadio.val();
    		const ticketPrice = parseInt(selectedRadio.getAttribute('data-price'));
    		const vat = Math.floor(ticketPrice*0.1);
    		const total = ticketPrice + vat;
    	
    	
    	//결제 내역 섹션
    	document.querySelector("#payment-result .payment-info span:nth-child(2)").textContent = ticketCategory;
    	document.querySelector("#payment-result .payment-info span:nth-child(4)").textContent = ticketPrice.toLocaleString();
    	document.querySelector("#payment-result .payment-info span:nth-child(6)").textContent = vat.toLocaleString();
    	document.querySelector("#payment-result .total span:nth-child(2)").textContent = total.toLocaleString();
    	
    	}    */ 
    
    </script>
    </th:block> 
</html>